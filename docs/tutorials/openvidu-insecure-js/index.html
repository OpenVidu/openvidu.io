---
layout: docs-layout
title: OpenVidu Documentation - openvidu-insecure-js
active: documentation
---

<script src="/js/plugins/jquery.min.js"></script>

<link rel="stylesheet" href="/css/syntax.css" />
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript">
	$(document).ready(function () {
		$('li.subnav_drop').find('ul.subnav').hide();
		$(".subnav").find("li:contains('openvidu-insecure-js')").each(function (i, e) {
			var currentElement = $(e);
			currentElement.parent().css({
				"display": "block",
				"visibility": "visible"
			}); //css("background-color","blue");
			currentElement.css({
				"display": "block",
				"visibility": "visible"
			});
		});
		$('li.subnav_drop div').click(function (i, e) {
			//$('li.subnav_drop span').not(this).find('ul.subnav').hide();
			$(this).parent().find('ul.subnav').toggle();
		});

		var minHeight = $('#sticky-menu').outerHeight() + 100;
		$('#doc-container').css('min-height', minHeight + 'px');
	});

	$(".wy-nav-content").find("li:contains('openvidu-insecure-js')").css('color', 'red');
</script>

<div id="doc-container" class="container text-justify">
		<div id="sticky-menu" class="col-lg-3 col-md-4 col-sm-12 col-xs-12">

			
			<nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
				<div class="wy-menu wy-menu-vertical" role="navigation" aria-label="main navigation">
					<div id="site-menu-title">
						<h3>Explore docs</h3>
						<hr>
					</div>
					<ul id="menu-list" class="current">
						 
						<li>
							<ul>

<li class="toctree-l1 ">
        <a class="" href="../../home/">What is OpenVidu?</a> 
</li>

</ul>
						</li>
						  
						<li>
							<ul>

<li  class="subnav_drop">
        <div><span>Tutorials</span></div>
        <ul class="subnav" hidden>
                 

<li class="toctree-l1 ">
        <a class="" href="../">Intro</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../openvidu-webcomponent/">openvidu-webcomponent</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../openvidu-hello-world/">openvidu-hello-world</a> 
</li>

  

<li class="toctree-l1 current">
        <a class="current" href="./">openvidu-insecure-js</a>  
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../openvidu-insecure-angular/">openvidu-insecure-angular</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../openvidu-library-angular/">openvidu-library-angular</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../openvidu-insecure-react/">openvidu-insecure-react</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../openvidu-library-react/">openvidu-library-react</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../openvidu-ionic/">openvidu-ionic</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../openvidu-js-java/">openvidu-js-java</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../openvidu-mvc-java/">openvidu-mvc-java</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../openvidu-js-node/">openvidu-js-node</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../openvidu-mvc-node/">openvidu-mvc-node</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul>

<li  class="subnav_drop">
        <div><span>Demos</span></div>
        <ul class="subnav" hidden>
                 

<li class="toctree-l1 ">
        <a class="" href="../../demos/openvidu-getaroom/">openvidu-getaroom</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../demos/openvidu-call/">openvidu-call</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../demos/openvidu-call-react/">openvidu-call-react</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../demos/openvidu-call-ionic/">openvidu-call-ionic</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../demos/openvidu-classroom/">openvidu-classroom</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul>

<li  class="subnav_drop">
        <div><span>Cheatsheet</span></div>
        <ul class="subnav" hidden>
                 

<li class="toctree-l1 ">
        <a class="" href="../../cheatsheet/join-session/">Join a session</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../cheatsheet/leave-session/">Leave a session</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../cheatsheet/subscribe-unsubscribe/">Subscribe/Unsubscribe from a stream</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../cheatsheet/publish-unpublish/">Publish/Unpublish a stream</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../cheatsheet/mute-audio-video/">Mute/Unmute audio and video</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../cheatsheet/manage-videos/">Manage video players</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../cheatsheet/share-data/">Share data between users</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../cheatsheet/send-messages/">Send text messages</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul>

<li  class="subnav_drop">
        <div><span>Advanced features</span></div>
        <ul class="subnav" hidden>
                 

<li class="toctree-l1 ">
        <a class="" href="../../advanced-features/recording/">Recording</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../advanced-features/screen-share/">Screen share</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../advanced-features/speech-detection/">Speech detection</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../advanced-features/filters/">Voice and video filters</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul>

<li  class="subnav_drop">
        <div><span>Reference Documentation</span></div>
        <ul class="subnav" hidden>
                 

<li class="toctree-l1 ">
        <a class="" href="../../reference-docs/openvidu-browser/">openvidu-browser API</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../reference-docs/openvidu-java-client/">openvidu-java-client API</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../reference-docs/openvidu-node-client/">openvidu-node-client API</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../reference-docs/REST-API/">REST  API</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../reference-docs/openvidu-server-params/">OpenVidu Server configuration</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../reference-docs/openvidu-server-cdr/">OpenVidu Server CDR</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul>

<li  class="subnav_drop">
        <div><span>Deployment</span></div>
        <ul class="subnav" hidden>
                 

<li class="toctree-l1 ">
        <a class="" href="../../deployment/deploying-demos-aws/">Deploying OpenVidu Demos on AWS (TUTORIAL)</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../deployment/deploying-aws/">Deploying OpenVidu on AWS</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../deployment/deploying-ubuntu/">Deploying OpenVidu on Ubuntu</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../deployment/deploying-app/">Deploying your OpenVidu app</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../deployment/upgrading/">Upgrading OpenVidu</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul>

<li  class="subnav_drop">
        <div><span>Contribute</span></div>
        <ul class="subnav" hidden>
                 

<li class="toctree-l1 ">
        <a class="" href="../../developing/">Developing OpenVidu</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						  
						<li>
							<ul>

<li class="toctree-l1 ">
        <a class="" href="../../troubleshooting/">Troubleshooting / FAQ</a> 
</li>

</ul>
						</li>
						  
						<li>
							<ul>

<li class="toctree-l1 ">
        <a class="" href="../../releases/">Releases</a> 
</li>

</ul>
						</li>
						  
						<li>
							<ul>

<li  style="width: 100%; display: inline-block"  class="subnav_drop">
        <div><span>OpenVidu Pro</span><a style="all: unset; display: inline"
                        href="/docs/openvidu-pro/">
                        <div id="openvidu-pro-tag" style="float: right; background-color: rgb(0, 136, 170); color: white; font-weight: bold; padding: 0px 5px; border-radius: 3px; font-size: 13px; line-height:21px; font-family: Montserrat, sans-serif;">PRO</div>
                </a></div>
        <ul class="subnav" hidden>
                 

<li class="toctree-l1 ">
        <a class="" href="../../openvidu-pro/">Home</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../openvidu-pro/openvidu-inspector/">OpenVidu Inspector</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../openvidu-pro/detailed-session-monitoring/">Detailed session monitoring</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../openvidu-pro/deploying-openvidu-pro/">Deploying OpenVidu Pro</a> 
</li>

  

<li class="toctree-l1 ">
        <a class="" href="../../openvidu-pro/REST-API-pro/">REST API Pro</a> 
</li>

 
</li>
</ul>

</ul>
						</li>
						 
					</ul>
				</div>
				&nbsp;
			</nav>
		</div>

		<section class="col-lg-9 col-md-8 col-sm-12 col-xs-12">
			
			<div>
				<div>

					<div role="main">
						<div class="section">
							 <h1 id="openvidu-insecure-js">openvidu-insecure-js</h1>
<p><a href="https://github.com/OpenVidu/openvidu-tutorials/tree/master/openvidu-insecure-js" target="_blank"><i class="icon ion-social-github"> Check it on GitHub</i></a></p>
<p>A client-side only application built with JavaScript, HTML and CSS.</p>
<p>If it is the first time you use OpenVidu, it is higly recommended to start with <strong><a href="../../tutorials/openvidu-hello-world/" target="_blank">openvidu-hello-world</a></strong> tutorial, as this app is no more than an extension of it with some new features and sytles.</p>
<h2 id="understanding-this-tutorial">Understanding this tutorial</h2>
<p align="center">
  <img class="img-responsive" src="https://docs.google.com/uc?id=0B61cQ4sbhmWSeVBWdkFwWEtqNjA">
</p>

<p>OpenVidu is composed by the three modules displayed on the image above in its insecure version.</p>
<ul>
<li><strong>openvidu-browser</strong>: JavaScript library for the browser. It allows you to manage your video-calls straight away from your clients</li>
<li><strong>openvidu-server</strong>: Java application that controls Kurento Media Server</li>
<li><strong>Kurento Media Server</strong>: server that handles low level operations of media flows transmission</li>
</ul>
<div style="
    display: table;
    border: 2px solid #0088aa9e;
    border-radius: 5px;
    width: 100%;
    margin-top: 30px;
    margin-bottom: 25px;
background-color: rgba(0, 136, 170, 0.04);"><div style="display: table-cell; vertical-align: middle;">
    <i class="icon ion-android-alert" style="
    font-size: 50px;
    color: #0088aa;
    display: inline-block;
    padding-left: 25%;
"></i></div>
<div style="
    vertical-align: middle;
    display: table-cell;
    padding-left: 20px;
    padding-right: 20px;
    ">
    Tutorial's name includes "insecure" word because this application has no backend and therefore it has no control over the users. Typically you don't want such application in production environments. When you feel comfortable with the client-side of OpenVidu, add your own server or follow one of our super simple secure tutorials.
</div>
</div>

<h2 id="running-this-tutorial">Running this tutorial</h2>
<p>1) Clone the repo:</p>
<pre><code class="bash">git clone https://github.com/OpenVidu/openvidu-tutorials.git
</code></pre>

<p>2) You will need an http web server installed in your development computer to execute the sample application. If you have <em>node.js</em> installed, you can use <a href="https://github.com/indexzero/http-server" target="_blank">http-server</a> to serve application files. It can be installed with:</p>
<pre><code class="bash">npm install -g http-server
</code></pre>

<p>3) Run the tutorial:</p>
<pre><code class="bash">http-server openvidu-tutorials/openvidu-insecure-js/web
</code></pre>

<p>4) <em>openvidu-server</em> and <em>Kurento Media Server</em> must be up and running in your development machine. The easiest way is running this Docker container which wraps both of them (you will need <a href="https://store.docker.com/search?type=edition&amp;offering=community" target="_blank">Docker CE</a>):</p>
<pre><code class="bash">docker run -p 4443:4443 --rm -e openvidu.secret=MY_SECRET openvidu/openvidu-server-kms:2.8.0
</code></pre>

<p>5) Go to <em><a href="http://localhost:8080" target="_blank"><code>localhost:8080</code></a></em> to test the app once the server is running. The first time you use the docker container, an alert message will suggest you accept the self-signed certificate of <em>openvidu-server</em> when you first try to join a video-call.</p>
<p><br></p>
<blockquote>
<p>If you are using <strong>Windows</strong>, read this <strong><a href="../../troubleshooting/#3-i-am-using-windows-to-run-the-tutorials-develop-my-app-anything-i-should-know" target="_blank">FAQ</a></strong> to properly run the tutorial</p>
<p>To learn <strong>some tips</strong> to develop with OpenVidu, check this <strong><a href="../../troubleshooting#2-any-tips-to-make-easier-the-development-of-my-app-with-openvidu" target="_blank">FAQ</a></strong></p>
</blockquote>
<div class="row no-margin row-gallery">
    <div class="col-md-6">
        <a data-fancybox="gallery" href="/img/demos/insecure-join.png">
        <img class="img-responsive" src="/img/demos/insecure-join.png">
    </a>
    </div>
    <div class="col-md-6">
        <a data-fancybox="gallery" href="/img/demos/insecure-session.png">
        <img class="img-responsive" src="/img/demos/insecure-session.png">
    </a>
    </div>
</div>

<h2 id="understanding-the-code">Understanding the code</h2>
<p>This application is very simple. It has only 4 files:</p>
<ul>
<li><code>openvidu-browser-VERSION.js</code>: openvidu-browser library. You don't have to manipulate this file. </li>
<li><code>app.js</code>: sample application main JavaScritp file, which makes use of <em>openvidu-browser-VERSION.js</em>. You can manipulate this file to suit your needs.</li>
<li><code>style.css</code>: some CSS classes to style <em>index.html</em>. You can manipulate this file to suit your needs.</li>
<li><code>index.html</code>: HTML code for the form to connect to a video-call and for the video-call itself. You can manipulate this file to suit your needs. It has two links to both JavaScript files: </li>
</ul>
<pre class="html-scripts">
    <code>&lt;script src="openvidu-browser-VERSION.js"&gt;&lt;/script&gt;
&lt;script src="app.js"&gt;&lt;/script&gt;</code>
</pre>

<p>Let's see how <code>app.js</code> uses <code>openvidu-browser-VERSION.js</code>:</p>
<hr />
<h4 id="first-lines-declare-the-variables-that-will-be-needed-in-different-points-along-the-code">First lines declare the variables that will be needed in different points along the code</h4>
<pre><code class="javascript">var OV;
var session;
</code></pre>

<p><code>OV</code> will be our OpenVidu object (entrypoint to the libray). <code>session</code> will be the video-call we will connect to. As first sentences in the join method, we initialize the two parameters whose value is retrieved from the HTML inputs.</p>
<pre><code class="javascript">var mySessionId = document.getElementById(&quot;sessionId&quot;).value;   // Session the user will join
var myUserName = document.getElementById(&quot;userName&quot;).value;     // Nickname of the user in the session
</code></pre>

<hr />
<h4 id="lets-initialize-a-new-session-and-configure-our-events">Let's initialize a new session and configure our events:</h4>
<pre><code class="javascript">// --- 1) Get an OpenVidu object ---

OV = new OpenVidu();

// --- 2) Init a session ---

session = OV.initSession();
</code></pre>

<p>As you can see in the code, the process is very simple: get an OpenVidu object and initialize a Session object with it.</p>
<pre><code class="javascript">// --- 3) Specify the actions when events take place in the session ---

// On every new Stream received...
session.on('streamCreated', event =&gt; {

    // Subscribe to the Stream to receive it. HTML video will be appended to element with 'video-container' id
    var subscriber = session.subscribe(event.stream, 'video-container');

    // When the HTML video has been appended to DOM...
    subscriber.on('videoElementCreated', event =&gt; {

        // Add a new &lt;p&gt; element for the user's nickname just below its video
        appendUserData(event.element, subscriber.stream.connection);
    });
});

// On every Stream destroyed...
session.on('streamDestroyed', event =&gt; {

    // Delete the HTML element with the user's nickname. HTML videos are automatically removed from DOM
    removeUserData(event.stream.connection);
});
</code></pre>

<p>Here we subscribe to the events that interest us. In this case, we want to receive all videos published to the session, as well as displaying every user's nickname next to its video. To achieve this:</p>
<ul>
<li>
<p><code>streamCreated</code>: for each new Stream received by OpenVidu, we immediately subscribe to it so we can see its video. A new HTML video element will be appended to element with id 'video-container'.</p>
</li>
<li>
<p><code>videoElementCreated</code>: event triggered by Subscriber object (returned by the previous <code>Session.subscribe</code> method). This allows us to add the participant nickname to the new video previously added in <code>streamCreated</code> event. Auxiliary method <code>appendUserData</code> is responsible for appending a new paragraph element just below the <code>event.element</code> video, containing <code>subscriber.stream.connection.data</code> field. In this case, this field contains the user's nickName. You can see how to feed this property from the client in a later step.</p>
</li>
<li>
<p><code>streamDestroyed</code>: for each Stream that has been destroyed (which means a user has left the video-call), we remove the element with the user's nickname that we added in the previous event with the auxiliary method <code>removeUserData</code> (<code>appendUserData</code> method created the element with an <em>id</em> containing <code>event.stream.connection.connectionId</code> unique value, so we can now identify the right element to be removed). OpenVidu automatically deletes the proper video element by default, so we don't need to do anything else.</p>
</li>
</ul>
<blockquote>
<p>Check <a href="#application-specific-methods">Application specific methods</a> section to see all the auxiliary methods used in this app</p>
</blockquote>
<hr />
<h4 id="get-a-token-from-openvidu-server">Get a <em>token</em> from OpenVidu Server</h4>
<div style="
    display: table;
    border: 2px solid #0088aa9e;
    border-radius: 5px;
    width: 100%;
    margin-top: 30px;
    margin-bottom: 25px;
background-color: rgba(0, 136, 170, 0.04);"><div style="display: table-cell; vertical-align: middle;">
    <i class="icon ion-android-alert" style="
    font-size: 50px;
    color: #0088aa;
    display: inline-block;
    padding-left: 25%;
"></i></div>
<div style="
    vertical-align: middle;
    display: table-cell;
    padding-left: 20px;
    padding-right: 20px;
    ">
    <strong>WARNING</strong>: This is why this tutorial is an insecure application. We need to ask OpenVidu Server for a user token in order to connect to our session. <strong>This process should entirely take place in our server-side</strong>, not in our client-side. But due to the lack of an application backend in this tutorial, the JavaScript code itself will perform the POST operations to OpenVidu Server
</div>
</div>

<pre><code class="javascript">// --- 4) Connect to the session with a valid user token ---

// 'getToken' method is simulating what your server-side should do.
// 'token' parameter should be retrieved and returned by your own backend
getToken(mySessionId).then(token =&gt; {
    // See next point to see how to connect to the session using 'token'
});
</code></pre>

<p>Now we need a token from OpenVidu Server. In a production environment we would perform this operations in our application backend, by making use of the <em><a href="../../reference-docs/REST-API/" target="_blank">REST API</a></em>, <em><a href="../../reference-docs/openvidu-java-client/" target="_blank">OpenVidu Java Client</a></em> or <em><a href="../../reference-docs/openvidu-node-client/" target="_blank">OpenVidu Node Client</a></em>. Here we have implemented the POST requests to OpenVidu Server in a method <code>getToken()</code> that returns a Promise with the token. Without going into too much detail, this method performs two <em>ajax</em> requests to OpenVidu Server, passing OpenVidu Server secret to authenticate them:</p>
<ul>
<li>First ajax request performs a POST to <code>/api/sessions</code> (we send a <code>customSessionId</code> field to name the session with our <code>mySessionId</code> value retrieved from HTML input)</li>
<li>Second ajax request performs a POST to <code>/api/tokens</code> (we send a <code>session</code> field to assign the token to this same session)</li>
</ul>
<p>You can inspect this method in detail in the <a href="https://github.com/OpenVidu/openvidu-tutorials/blob/master/openvidu-insecure-js/web/app.js#L192" target="_blank">GitHub repo</a>.</p>
<hr />
<h4 id="finally-connect-to-the-session-using-the-token-and-publish-your-webcam">Finally connect to the session using the token and publish your webcam:</h4>
<pre><code class="javascript">// --- 4) Connect to the session with a valid user token ---

// 'getToken' method is simulating what your server-side should do.
// 'token' parameter should be retrieved and returned by your own backend
getToken(mySessionId).then(token =&gt; {

    // First param is the token got from OpenVidu Server. Second param can be retrieved by every user on event
    // 'streamCreated' (property Stream.connection.data), and will be appended to DOM as the user's nickname
    session.connect(token, { clientData: myUserName })
        .then(() =&gt; {

            // --- 5) Set page layout for active call ---

            document.getElementById('session-title').innerText = mySessionId;
            document.getElementById('join').style.display = 'none';
            document.getElementById('session').style.display = 'block';

            // --- 6) Get your own camera stream with the desired properties ---

            var publisher = OV.initPublisher('video-container', {
                audioSource: undefined, // The source of audio. If undefined default microphone
                videoSource: undefined, // The source of video. If undefined default webcam
                publishAudio: true,     // Whether you want to start publishing with your audio unmuted or not
                publishVideo: true,     // Whether you want to start publishing with your video enabled or not
                resolution: '640x480',  // The resolution of your video
                frameRate: 30,          // The frame rate of your video
                insertMode: 'APPEND',   // How the video is inserted in the target element 'video-container'
                mirror: false           // Whether to mirror your local video or not
            });

            // --- 7) Specify the actions when events take place in our publisher ---

            // When our HTML video has been added to DOM...
            publisher.on('videoElementCreated', function (event) {
                initMainVideo(event.element, myUserName);
                appendUserData(event.element, myUserName);
                event.element['muted'] = true;
            });

            // --- 8) Publish your stream ---

            session.publish(publisher);

        })
        .catch(error =&gt; {
            console.log('There was an error connecting to the session:', error.code, error.message);
        });
});
</code></pre>

<p>In <code>session.connect</code> method first param is the recently retrieved user token. Remember <code>videoElementCreated</code> event for the Subscriber object, when we added the user's nickname to the HTML? Well, second parameter is the actual value every user will receive in <code>Stream.connection.data</code> property in that event. So in this case it is an object with a property "clientData" with value "myUserName", which has been set in the first step to the value retrieved from HTML input <code>&lt;input class="form-control" type="text" id="userName" required&gt;</code> (this is filled by the user).</p>
<p>If the method succeeds, we first change our view to the active call (5) and then proceed to publish our webcam to the session. To do so we get a <code>Publisher</code> object with the desired properties (6). This process will end with the addition of a new HTML video element showing your camera, as a child of element with <em>id</em> 'video-container'. Event <code>videoElementCreated</code> will be fired by the Publisher object just after this video is added to DOM, so we can subscribe to it and do whatever we want with it. In this case, we init another bigger video element with our video and append our nickname to it, by using auxiliary methods <code>initMainVideo</code> and <code>appendUserData</code> (7).</p>
<p>Finally we just have to publish <code>publisher</code> object through <code>Session.publish</code> method (8), and the rest of users will begin receiving our webcam ('streamCreated' event will be fired for them).</p>
<hr />
<h4 id="leaving-the-session">Leaving the session:</h4>
<p>Whenever we want a user to leave the session, we just need to call <code>session.disconnect</code> method:</p>
<pre><code class="javascript">function leaveSession() {

    // --- 9) Leave the session by calling 'disconnect' method over the Session object ---

    session.disconnect();

    // Removing all HTML elements with user's nicknames. 
    // HTML videos are automatically removed when leaving a Session
    removeAllUserData();

    // Back to 'Join session' page
    document.getElementById('join').style.display = 'block';
    document.getElementById('session').style.display = 'none';
}
</code></pre>

<hr />
<h4 id="application-specific-methods">Application specific methods</h4>
<p>Here you have all the auxiliary methods used in this app, which are not directly related to OpenVidu:</p>
<pre><code class="javascript">/* APPLICATION SPECIFIC METHODS */

window.addEventListener('load', function () {
    generateParticipantInfo();
});

window.onbeforeunload = function () {
    if (session) session.disconnect();
};

function generateParticipantInfo() {
    document.getElementById(&quot;sessionId&quot;).value = &quot;SessionA&quot;;
    document.getElementById(&quot;userName&quot;).value = &quot;Participant&quot; + Math.floor(Math.random() * 100);
}

function appendUserData(videoElement, connection) {
    var userData;
    var nodeId;
    if (typeof connection === &quot;string&quot;) {
        userData = connection;
        nodeId = connection;
    } else {
        userData = JSON.parse(connection.data).clientData;
        nodeId = connection.connectionId;
    }
    var dataNode = document.createElement('div');
    dataNode.className = &quot;data-node&quot;;
    dataNode.id = &quot;data-&quot; + nodeId;
    dataNode.innerHTML = &quot;&lt;p&gt;&quot; + userData + &quot;&lt;/p&gt;&quot;;
    videoElement.parentNode.insertBefore(dataNode, videoElement.nextSibling);
    addClickListener(videoElement, userData);
}

function removeUserData(connection) {
    var dataNode = document.getElementById(&quot;data-&quot; + connection.connectionId);
    dataNode.parentNode.removeChild(dataNode);
}

function removeAllUserData() {
    var nicknameElements = document.getElementsByClassName('data-node');
    while (nicknameElements[0]) {
        nicknameElements[0].parentNode.removeChild(nicknameElements[0]);
    }
}

function addClickListener(videoElement, userData) {
    videoElement.addEventListener('click', function () {
        var mainVideo = document.querySelector('#main-video video');
        var mainUserData = document.querySelector('#main-video p');
        if (mainVideo.srcObject !== videoElement.srcObject) {
            mainUserData.innerHTML = userData;
            mainVideo.srcObject = videoElement.srcObject;
        }
    });
}

function initMainVideo(videoElement, userData) {
    document.querySelector('#main-video video').srcObject = videoElement.srcObject;
    document.querySelector('#main-video p').innerHTML = userData;
    document.querySelector('#main-video video')['muted'] = true;
}
</code></pre>

<p><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.20/jquery.fancybox.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.1.20/jquery.fancybox.min.js"></script>
<script>
  $().fancybox({
    selector : '[data-fancybox="gallery"]',
    infobar : true,
    arrows : false,
    loop: true,
    protect: true,
    transitionEffect: 'slide',
    buttons : [
        'close'
    ],
    clickOutside : 'close',
    clickSlide   : 'close',
  });
</script></p> 
						</div>
					</div> <footer>
<hr>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../openvidu-insecure-angular/" class="btn btn-xs btn-primary float-right" title="openvidu-insecure-angular">Next &raquo;<span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../openvidu-hello-world/" class="btn btn-xs btn-primary" title="openvidu-hello-world"><span class="icon icon-circle-arrow-left"></span> &laquo; Prev</a>
      
    </div>
  


  
  <div id="edit-github">
  
	  <a href="https://github.com/OpenVidu/openvidu.io-docs/blob/master/docs/tutorials/openvidu-insecure-js.md"><i class="icon ion-social-github"></i> Edit Documentation on GitHub</a>
  
  </div>
</footer> 
				</div>
			</div>
		</section>
</div>